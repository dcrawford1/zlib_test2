version: 1.0.{build}

branches:
  only:
    - master

max_jobs: 1

image: Visual Studio 2017

init:
  - git config --global core.autocrlf input

#clone_folder: c:\projects\maxconnect

shallow_clone: true

cache:
  - vcpkg-6

platform: x86
configuration: Release

before_build:
  - echo Prepare vcpkg...
  - ps: $VCPKG = "vcpkg-6"; if(!(Test-Path -Path $VCPKG )){ Invoke-WebRequest "http://intelight.s3.amazonaws.com/vcpkg/$VCPKG.zip" -OutFile $VCPKG".zip"; ls; Expand-Archive -Path ${VCPKG}".zip"; ls }
  
build:
  parallel: true
  project: build\sample.sln
  
after_build:
  - ps: ls build
